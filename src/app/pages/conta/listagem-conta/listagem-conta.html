<div class="container mt-5">
  <div class="d-flex justify-content-between">
    <h1>Listagem de contas</h1>
    <button mat-raised-button color="primary" routerLink="/conta/nova">
      Nova conta
    </button>
  </div>
  <!-- Loading Spinner -->
  @if (loading()) {
    <div class="spinner-container overlay">
      <mat-spinner diameter="60"></mat-spinner>
    </div>
  }
  @if (!loading()) {
    <table mat-table class="mt-5" [dataSource]="source()">
      <!-- Coluna ID -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> No. </th>
        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
      </ng-container>
      <!-- Coluna Cliente -->
      <ng-container matColumnDef="cliente">
        <th mat-header-cell *matHeaderCellDef> Cliente </th>
        <td mat-cell *matCellDef="let element">
          {{ element.cliente.asString() }}
        </td>
      </ng-container>
      <!-- Coluna Numero -->
      <ng-container matColumnDef="numero">
        <th mat-header-cell *matHeaderCellDef> Número </th>
        <td mat-cell *matCellDef="let element"> {{element.numero}} </td>
      </ng-container>
      <!-- Coluna Agencia -->
      <ng-container matColumnDef="agencia">
        <th mat-header-cell *matHeaderCellDef> Agência </th>
        <td mat-cell *matCellDef="let element"> {{element.agencia}} </td>
      </ng-container>
      <!-- Coluna Saldo -->
      <ng-container matColumnDef="saldo">
        <th mat-header-cell *matHeaderCellDef> Saldo </th>
        <td mat-cell *matCellDef="let element"> {{element.saldo}} </td>
      </ng-container>
      <!-- Coluna Funcoes -->
      <ng-container matColumnDef="funcoes">
        <th mat-header-cell *matHeaderCellDef> </th>
        <td mat-cell *matCellDef="let element">
          <mat-icon fontIcon="edit"
            [routerLink]="'/conta/editar/' + element.id">
          </mat-icon>
          <mat-icon fontIcon="delete"
            (click)="deletaConta(element.id)">
          </mat-icon>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="columns()"></tr>
      <tr mat-row *matRowDef="let row; columns: columns();"></tr>
    </table>
  }
  <mat-paginator
    [pageSizeOptions]="[5, 10, 20]"
    showFirstLastButtons
    [length]="total()"
    (page)="onPageChange($event)">
  </mat-paginator>
</div>
